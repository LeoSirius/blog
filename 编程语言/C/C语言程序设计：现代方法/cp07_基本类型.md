# 7 基本类型

## 7.1 整数类型

C 中两种根本不同的数值类型：int 和 float，再配上 long short unsigned 等修饰，组合出多种类型。

C99 中加入了 long long，并规定其至少64位

### 整数常量

三种整数常量：

- 十进制
- 八进制，以 0 开头
- 十六进制，以 0x 或 0X 开头，大小写字母都可以

在使用 printf 和 scanf 时，如果想指定类型，可以用 u, o, x 代替 d

```c
unsinged int u;
scanf("%u", &u);    // 以 10 进制读取 u
scanf("%o", &u);    // 以 8 进制读取 u
scanf("%x", &u);    // 以 16 进制读取 u
```

读写短整数时，可以在 d, u, o, x 前面加上 h

```c
short s;
scanf("%hd", &s);
```

同理读写 long 时，在前面加 l，读写 long long 时，在前面加 ll

## 7.3 字符类型

C 中字符类型被当做小整数。字符是有符号的吗：有些编译器中是 signed，而有些则是 unsigned

### 转义序列（escape sequence）

转义序列分两种：

- 字符转义序列（character escape）：如 `\n` `\t` `\'` 等
- 数字转义序列（numeric escap）
    - 八进制转义序列：`\`后面加三个数，如 `\332`。这里和常量不同，可以不用 0 开头
    - 十六进制转义序列：如`\x1b`

注意在字符串中谨慎使用数字转义序列，编译器对八进制转义序列，编译器只会找前 3 个；对十六进制转义序列，会找到第一个在表示范围外的字符截止。

如，`"\189"`由三个字符组成，`"\x1fgg1"`由四个字符组成。一个有效的方法是写多个字符串隔开

```c
#include <stdio.h>

int main()
{
    char *str = "\x30""ggg";    // \x30 即 48
    printf("%s\n", str);        // 0ggg
    return 0;
}
```

## 7.4 类型转换

### 隐式转换

隐式转换发生的情形：

- 表达式中操作数的类型不同（C 语言执行所谓的「常用算数转换」）
- 赋值语句左右两边类型不同
- 函数实参与形参的类型不同
- return 的值于函数预期返回的类型不同

常用算数转换的规则

- 有浮点则变浮点
- 往位数大的类型转

### 显示转换

```c
(类型名)表达式
```

实际上 C 会把 `(类型名)` 当做一元运算符，一元运算符的优先级要高于二元运算符。

## 7.5 类型定义

`typedef 已有类型名 新的类型名`

## 7.6 sizeof 运算符

`sizeof(xx)` 返回 xx 的类型占内存的大小

sizeof 不是函数调用，是在编译时就由编译器就出的量，在汇编代码里，就被换成了数字常量
