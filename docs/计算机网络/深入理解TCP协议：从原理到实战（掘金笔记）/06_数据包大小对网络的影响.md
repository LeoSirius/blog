# 数据包大小对网络的影响

## 最大传输单元（Maximum Transmission Unit, MTU）

- MTU：数据链路层传输的帧的最大字节

下图是以太网的帧格式，以太网的帧最小的帧是 64 字节，除去 14 字节头部和 4 字节 CRC 字段，有效荷载最小为 46 字节。最大的帧是 1518 字节，除去 14 字节头部和 4 字节 CRC，有效荷载最大为 1500，这个值就是以太网的 MTU。因此如果传输 100KB 的数据，至少需要 （100 * 1024 / 1500) = 69 个以太网帧。

![以太网的帧格式](https://s1.ax1x.com/2020/10/16/0bBJJS.jpg)

不同的数据链路层的 MTU 是不同的。通过`netstat -i` 可以查看网卡的 mtu。（lo是localhost）

```bash
(base) root slt (master) # netstat -i
Kernel Interface table
Iface      MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
eth0      1500  1540408      0      0 0       1026255      0      0      0 BMRU
lo       65536   869483      0      0 0        869483      0      0      0 LRU
```

## IP分段

IPv4 数据报的最大大小为 65535 字节，这已经远远超过了以太网的 MTU，需要分段。

IP头部中有个字段是`分片偏移量（Fragment Offset）`，表示该分段在原始数据报文中的位置

4U9EPrmX+T

#Seafile server licence

Name = "demo.seafile.top"
Licencetype = "User"
LicenceKEY = "1590996761"
ProductID = "Seafile server"
Expiration = "2021-06-01"
MaxUsers = "3000"
Mode = "subscription"

Hash = "b1968d45a2de9fd9b612300f14de6962fa9ac545da5d1bc39d0f061144df99625135fbbb088f67163a9c168edd48d0cd8e9064f0b3f76619864af4599762fd6ca0f0cd65d39b95764181b31b4a648470d001e707e0b4f07a7d4b86ad5da3bfe1cd7ffdd71d170eaf157cb4f58167f3402b448947c855b769cbffb21326dccda999c4fb4df8fe9c5d674b7f1bd080d16cda000bf27a13d0fe0cbb03e04cd5548333fe2a5cb6d81824d8bb1d25d191f16e2edadaa2c38de20f59a29b24fe67b30336ae82a385978001ddf83c5ce7a473c9c73661ee4e170aef056c9519e42633e676bf442b4d566112152d7205fdb70be121fa2fd0b65f88c15c34b114392cc574"

Hash2 = "90bc7f354c7cb17607b55b3f8da1f5f6f403e3a1aa3a6431ff7640ba5fec8bb94d5b770168cee645c103a6eacf23ff8f8fd5cbcf8f675485e6ea2ab1a1aa702d6f238c31c306b4efa0fff5b6a46557c55e14ebcd55e0c85dbd0a7c5dca533a416fc1485f1c148106a056a8e4abfd977d75ea75163e31f901478dc617b6faad523cc9894bb2ba1a5dc17ec2f6f96ec8f0964d56e8af3c0e32e1f5b32ee245421442e13fb1d575e7fbdcde48008fc8d79d0e2f8a3f9a66282d5d528727cd363a2f27aeb817340de706929b56c9eb21e5257d6ca0d76721ce3dfc20b34f258cf8da117f2ed9004d2609f859616019e3614839e0275ad944488f8c8c4352fed4f945"