# 使用结构化命令

## if语句

bash中if后面是一个命令，如果命令执行成功（退出状态码为0），则条件成立。

## 条件命令 test

如果if后面不想用命令而是条件，可以用条件命令`test`。`test`的条件成立，这个命令的退出码就是0，否则就不是0.

```bash
$ test 1 == 1
$ echo $?
0
$ test 1 == 2
$ echo $?
1
```

在if后面写`[condition]`就是`test condition`

条件有3类：

- 数值比较（注意bash本身只支持整数运算）
- 字符串比较
- 文件比较

符合条件也支持：

- `if [condition1] && [condition2]; then`
- `if [condition1] || [condition2]; then`

## 双括号和双方括号

方括号本身就是`test`命令。要想使用高级命令可以用下面两个加强版：

- 双括号中可以使用高级数学表达式：自增、位移、求幂、布尔运算等
- 双方括号支持模式匹配`

## case语句

case是直接把值进行模式匹配

```bash
#!/bin/bash
USER=$1

if [ $USER = 'Leo' ]; then
    echo 'Hello Leo'
elif [ $USER = 'Siria' ]; then
    echo 'Hello Siria'
else
    echo 'Hello nobody'
fi
```

对应的case版本

```bash
case $USER in
Leo)
    echo 'Hello Leo';;
Siria)
    echo 'Hello Siria';;
*)
    echo 'Hello nobody';;
esac
```

## 基本for

基本形式如下

```bash
for var in list; do
    commands
done
```
